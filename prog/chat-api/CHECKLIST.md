# ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¢–ó

## –ú–æ–¥–µ–ª–∏

### Chat
- ‚úÖ `id: int` ‚Äî SERIAL PRIMARY KEY
- ‚úÖ `title: str` ‚Äî VARCHAR(200), NOT NULL
- ‚úÖ `created_at: datetime` ‚Äî TIMESTAMP WITH TIME ZONE, DEFAULT NOW()

### Message
- ‚úÖ `id: int` ‚Äî SERIAL PRIMARY KEY
- ‚úÖ `chat_id: int` ‚Äî INTEGER, FK –Ω–∞ Chat —Å ON DELETE CASCADE
- ‚úÖ `text: str` ‚Äî VARCHAR(5000), NOT NULL
- ‚úÖ `created_at: datetime` ‚Äî TIMESTAMP WITH TIME ZONE, DEFAULT NOW()

### –°–≤—è–∑—å
- ‚úÖ Chat 1‚ÄîN Message (relationship –≤ SQLAlchemy)

---

## API –ú–µ—Ç–æ–¥—ã

### 1. POST /chats/
- ‚úÖ Body: `title: str`
- ‚úÖ Response: —Å–æ–∑–¥–∞–Ω–Ω—ã–π —á–∞—Ç (201)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤: `app/routers/chats.py:create_chat()`

### 2. POST /chats/{id}/messages/
- ‚úÖ Body: `text: str`
- ‚úÖ Response: —Å–æ–∑–¥–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (201)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤: `app/routers/chats.py:create_message()`

### 3. GET /chats/{id}
- ‚úÖ Query: `limit` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20, –º–∞–∫—Å–∏–º—É–º 100)
- ‚úÖ Query: `offset` (–¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ—Ç—ã, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)
- ‚úÖ Response: —á–∞—Ç + messages (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ created_at DESC)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤: `app/routers/chats.py:get_chat()`

### 4. DELETE /chats/{id}
- ‚úÖ Response: 204 No Content
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤: `app/routers/chats.py:delete_chat()`

---

## –õ–æ–≥–∏–∫–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –ù–µ–ª—å–∑—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —á–∞—Ç (404)
- ‚úÖ `title`:
  - ‚úÖ –ù–µ –ø—É—Å—Ç–æ–π, –¥–ª–∏–Ω–∞ 1..200
  - ‚úÖ –ü—Ä–æ–±–µ–ª—ã –ø–æ –∫—Ä–∞—è–º —Ç—Ä–∏–º–º–∏—Ä—É—é—Ç—Å—è (`@field_validator`)
- ‚úÖ `text`:
  - ‚úÖ –ù–µ –ø—É—Å—Ç–æ–π, –¥–ª–∏–Ω–∞ 1..5000
  - ‚úÖ –ü—Ä–æ–±–µ–ª—ã –ø–æ –∫—Ä–∞—è–º —Ç—Ä–∏–º–º–∏—Ä—É—é—Ç—Å—è (`@field_validator`)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ GET /chats/{id} –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ limit —Å–æ–æ–±—â–µ–Ω–∏–π (DESC)
- ‚úÖ –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —á–∞—Ç–∞ (`ON DELETE CASCADE`)

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°—Ç–µ–∫
- ‚úÖ FastAPI (0.109.0)
- ‚úÖ PostgreSQL (15-alpine)
- ‚úÖ SQLAlchemy ORM (2.0.25, async —Å asyncpg)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Alembic
- ‚úÖ Docker + docker-compose

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `app/main.py`
  - Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
  - Exception handlers —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫

- ‚úÖ –¢–µ—Å—Ç—ã (pytest):
  - 30+ integration —Ç–µ—Å—Ç–æ–≤ (`tests/test_chats.py`)
  - 15+ unit —Ç–µ—Å—Ç–æ–≤ (`tests/test_validation.py`)
  - –ü–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö endpoints –∏ edge-cases
  - –¢–µ—Å—Ç–æ–≤–∞—è –ë–î —Å –∏–∑–æ–ª—è—Ü–∏–µ–π –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (models/schemas/services/routers)
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:
  - **Models** ‚Äî SQLAlchemy –º–æ–¥–µ–ª–∏
  - **Schemas** ‚Äî Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è
  - **Services** ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
  - **Routers** ‚Äî HTTP endpoints

### –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å (–æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞)
- ‚úÖ Type hints –≤–µ–∑–¥–µ
- ‚úÖ Docstrings –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —É—á–∞—Å—Ç–∫–æ–≤

### –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Pydantic)
- ‚úÖ –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (ON DELETE CASCADE –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö edge-cases
- ‚úÖ Exception handling —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ HTTP –∫–æ–¥–∞–º–∏

---

## Docker

### docker-compose.yml
- ‚úÖ PostgreSQL —Å–µ—Ä–≤–∏—Å —Å health check
- ‚úÖ App —Å–µ—Ä–≤–∏—Å —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é –æ—Ç –ë–î
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚úÖ Volume –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Hot-reload –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Dockerfile
- ‚úÖ Multi-stage –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ Python 3.11 slim
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ù–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ COPY –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–æ—ë–≤

---

## README.md

- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É —á–µ—Ä–µ–∑ `docker-compose up`
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API endpoints
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- ‚úÖ –°—Ö–µ–º–∞ –ë–î
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∏–≥—Ä–∞—Ü–∏—è—Ö

---

## –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ (–∏–∑–±–µ–∂–∞–ª–∏)

- ‚úÖ **–ù–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç** ‚Äî –£ –Ω–∞—Å —á—ë—Ç–∫–∞—è —Å–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ **–ù–µ—á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥** ‚Äî –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å, docstrings, type hints
- ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏** ‚Äî Type hints –≤–µ–∑–¥–µ + Pydantic
- ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏** ‚Äî Pydantic schemas —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞–º–∏
- ‚úÖ **–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è –∑–∞–ø—É—Å–∫–∞** ‚Äî –ü–æ–¥—Ä–æ–±–Ω—ã–π README.md + QUICKSTART.md

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –°–≤–µ—Ä—Ö –¢–ó:
- ‚úÖ Offset –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (–≤ –¢–ó –Ω–µ —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ)
- ‚úÖ Health check endpoint
- ‚úÖ Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ Exception handlers –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
- ‚úÖ API_EXAMPLES.md —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ Makefile –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ pytest.ini —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –ë–î –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ 30+ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º edge-cases

---

## –ò—Ç–æ–≥

**–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¢–ó –≤—ã–ø–æ–ª–Ω–µ–Ω—ã ‚úÖ**

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- Production-ready –∫–æ–¥
- Comprehensive —Ç–µ—Å—Ç—ã
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Makefile)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–∏–Ω–¥–µ–∫—Å—ã)

**–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é –∏ –∫–æ–¥-—Ä–µ–≤—å—é! üöÄ**
