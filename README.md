# Chat API

REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∞—Ç–∞–º–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞ FastAPI + PostgreSQL.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–æ–≤ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç—ã
- –ü–æ–ª—É—á–µ–Ω–∏–µ —á–∞—Ç–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
- –£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–æ–≤ (—Å –∫–∞—Å–∫–∞–¥–Ω—ã–º —É–¥–∞–ª–µ–Ω–∏–µ–º —Å–æ–æ–±—â–µ–Ω–∏–π)

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: FastAPI 0.109.0
- **Database**: PostgreSQL 15 + SQLAlchemy 2.0 (async)
- **ORM**: SQLAlchemy —Å asyncpg –¥—Ä–∞–π–≤–µ—Ä–æ–º
- **Validation**: Pydantic 2.5
- **Migrations**: Alembic
- **Testing**: pytest + pytest-asyncio
- **Containerization**: Docker + docker-compose

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
chat-api/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ database.py          # Async SQLAlchemy setup
‚îÇ   ‚îú‚îÄ‚îÄ exceptions.py        # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ models/              # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chat.py
‚îÇ   ‚îú‚îÄ‚îÄ schemas/             # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chat.py
‚îÇ   ‚îú‚îÄ‚îÄ services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chat_service.py
‚îÇ   ‚îî‚îÄ‚îÄ routers/             # API endpoints
‚îÇ       ‚îî‚îÄ‚îÄ chats.py
‚îú‚îÄ‚îÄ alembic/                 # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ versions/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 001_initial.py
‚îÇ   ‚îî‚îÄ‚îÄ env.py
‚îú‚îÄ‚îÄ tests/                   # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py
‚îÇ   ‚îú‚îÄ‚îÄ test_chats.py
‚îÇ   ‚îî‚îÄ‚îÄ test_validation.py
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ alembic.ini
‚îú‚îÄ‚îÄ pytest.ini
‚îî‚îÄ‚îÄ README.md
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker >= 20.10
- docker-compose >= 1.29

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone <repository-url>
   cd chat-api
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
   ```bash
   cp .env.example .env
   ```
   
   –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `docker-compose.yml`.

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```bash
   docker-compose up --build
   ```
   
   –≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –ó–∞–ø—É—Å—Ç–∏—Ç PostgreSQL
   - –°–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic
   - –ó–∞–ø—É—Å—Ç–∏—Ç FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

4. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:**
   - API: http://localhost:8000
   - Swagger UI (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è): http://localhost:8000/docs
   - ReDoc: http://localhost:8000/redoc

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
docker-compose down
```

–î–ª—è —É–¥–∞–ª–µ–Ω–∏—è volumes (–ë–î):
```bash
docker-compose down -v
```

## üìö API Endpoints

### 1. –°–æ–∑–¥–∞—Ç—å —á–∞—Ç
**POST** `/chats/`

**Request Body:**
```json
{
  "title": "General Chat"
}
```

**Response (201):**
```json
{
  "id": 1,
  "title": "General Chat",
  "created_at": "2026-02-04T10:30:00Z"
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- `title`: 1-200 —Å–∏–º–≤–æ–ª–æ–≤, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ
- –ü—Ä–æ–±–µ–ª—ã –ø–æ –∫—Ä–∞—è–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è

---

### 2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
**POST** `/chats/{chat_id}/messages/`

**Request Body:**
```json
{
  "text": "Hello, world!"
}
```

**Response (201):**
```json
{
  "id": 1,
  "chat_id": 1,
  "text": "Hello, world!",
  "created_at": "2026-02-04T10:31:00Z"
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- `text`: 1-5000 —Å–∏–º–≤–æ–ª–æ–≤, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ
- –ü—Ä–æ–±–µ–ª—ã –ø–æ –∫—Ä–∞—è–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è

**–û—à–∏–±–∫–∏:**
- `404`: –ß–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

---

### 3. –ü–æ–ª—É—á–∏—Ç—å —á–∞—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
**GET** `/chats/{chat_id}?limit=20&offset=0`

**Query Parameters:**
- `limit` (optional): –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π (1-100, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20)
- `offset` (optional): –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å N —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)

**Response (200):**
```json
{
  "id": 1,
  "title": "General Chat",
  "created_at": "2026-02-04T10:30:00Z",
  "messages": [
    {
      "id": 3,
      "chat_id": 1,
      "text": "Latest message",
      "created_at": "2026-02-04T10:33:00Z"
    },
    {
      "id": 2,
      "chat_id": 1,
      "text": "Second message",
      "created_at": "2026-02-04T10:32:00Z"
    }
  ]
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ `created_at` **DESC** (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `limit` –∏ `offset`

**–û—à–∏–±–∫–∏:**
- `404`: –ß–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
- `422`: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (limit –≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ 1-100)

---

### 4. –£–¥–∞–ª–∏—Ç—å —á–∞—Ç
**DELETE** `/chats/{chat_id}`

**Response (204):**
```
No Content
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ: –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–û—à–∏–±–∫–∏:**
- `404`: –ß–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

---

### 5. Health Check
**GET** `/health`

**Response (200):**
```json
{
  "status": "healthy",
  "service": "chat-api"
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker-compose exec app pytest

# –õ–æ–∫–∞–ª—å–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
pytest
```

### –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º

```bash
docker-compose exec app pytest --cov=app --cov-report=html
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

- **Integration —Ç–µ—Å—Ç—ã** (`tests/test_chats.py`):
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö API endpoints
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –ø–∞–≥–∏–Ω–∞—Ü–∏–∏, –∫–∞—Å–∫–∞–¥–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
  - –ü–æ–∫—Ä—ã—Ç–∏–µ edge-cases (–ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏, –ª–∏–º–∏—Ç—ã –¥–ª–∏–Ω—ã, 404 –æ—à–∏–±–∫–∏)

- **Unit —Ç–µ—Å—Ç—ã** (`tests/test_validation.py`):
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Pydantic —Å—Ö–µ–º –≤ –∏–∑–æ–ª—è—Ü–∏–∏
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ trimming, –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤, –≥—Ä–∞–Ω–∏—Ü –¥–ª–∏–Ω—ã

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ –ë–î

```sql
-- –¢–∞–±–ª–∏—Ü–∞ —á–∞—Ç–æ–≤
CREATE TABLE chats (
    id SERIAL PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
CREATE TABLE messages (
    id SERIAL PRIMARY KEY,
    chat_id INTEGER NOT NULL REFERENCES chats(id) ON DELETE CASCADE,
    text VARCHAR(5000) NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_chats_created_at ON chats(created_at);
CREATE INDEX idx_messages_chat_id ON messages(chat_id);
CREATE INDEX idx_messages_created_at ON messages(created_at);
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏

–ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ `docker-compose up`.

**–†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏:**

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker-compose exec app alembic upgrade head

# –û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker-compose exec app alembic downgrade -1

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
docker-compose exec app alembic revision --autogenerate -m "description"
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–µ–∑ Docker

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   python -m venv venv
   source venv/bin/activate  # Windows: venv\Scripts\activate
   pip install -r requirements.txt
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ PostgreSQL:**
   ```bash
   # –°–æ–∑–¥–∞–π—Ç–µ –ë–î
   createdb chatdb
   
   # –û–±–Ω–æ–≤–∏—Ç–µ .env
   DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/chatdb
   ```

3. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
   ```bash
   alembic upgrade head
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```bash
   uvicorn app.main:app --reload
   ```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-----------|----------|--------------|
| `DATABASE_URL` | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL | `postgresql+asyncpg://chatuser:chatpass@db:5432/chatdb` |
| `LOG_LEVEL` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | `INFO` |
| `APP_HOST` | –•–æ—Å—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | `0.0.0.0` |
| `APP_PORT` | –ü–æ—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | `8000` |

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

- **Startup/Shutdown**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø—É—Å–∫–µ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- **Requests**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- **Errors**: –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —Å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–æ–π

–ü—Ä–∏–º–µ—Ä:
```
2026-02-04 10:30:00 - app.main - INFO - Starting Chat API application...
2026-02-04 10:30:01 - app.main - INFO - POST /chats/
2026-02-04 10:30:01 - app.main - INFO - Response status: 201
```

## üêõ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è –≤—Å–µ—Ö –æ—à–∏–±–æ–∫:

**404 Not Found:**
```json
{
  "detail": "Chat with id 123 not found"
}
```

**422 Validation Error:**
```json
{
  "detail": [
    {
      "loc": ["body", "title"],
      "msg": "Title cannot be empty or only whitespace",
      "type": "value_error"
    }
  ]
}
```

**500 Internal Server Error:**
```json
{
  "detail": "Internal server error"
}
```

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¢–ó

- ‚úÖ FastAPI + PostgreSQL + SQLAlchemy ORM
- ‚úÖ Async SQLAlchemy 2.0 —Å asyncpg
- ‚úÖ –í—Å–µ 4 endpoint'–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Pydantic)
- ‚úÖ Trimming –ø—Ä–æ–±–µ–ª–æ–≤ –¥–ª—è title –∏ text
- ‚úÖ –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î (`ON DELETE CASCADE`)
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å limit (1-100)
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ `created_at DESC`
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic
- ‚úÖ Docker + docker-compose
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (models/schemas/services/routers)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –¢–µ—Å—Ç—ã (pytest): integration –∏ unit
- ‚úÖ –¢–∏–ø–∏–∑–∞—Ü–∏—è (type hints)

## üéØ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **–ò–Ω–¥–µ–∫—Å—ã –ë–î**:
   - `idx_chats_created_at` ‚Äî –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —á–∞—Ç–æ–≤
   - `idx_messages_chat_id` ‚Äî –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ chat_id
   - `idx_messages_created_at` ‚Äî –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

2. **Async/Await**:
   - –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å—Ç–µ–∫ (FastAPI + asyncpg)
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

3. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**:
   - –°–æ–æ–±—â–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î (LIMIT/OFFSET)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä
NightFox
